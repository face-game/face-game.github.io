{"version":3,"sources":["js/sketch.js"],"names":["sketch","s","videoInput","poseNet","canvasBg","width","height","devPixRat","window","devicePixelRatio","rWidth","rHeight","player","getContent","callback","request","XMLHttpRequest","open","onload","getContentOnload","status","lines","responseText","split","content","int","random","length","debug","console","log","onerror","getContentOnerror","err","send","wakeupRemote","wakeupOnload","data","JSON","parse","remoteAwake","wakeupOnerror","init","cameraReady","modelReady","ended","loc","coords","poses","part","level","snapped","sent","sendData","sendInit","startShowLoad","i","levels","img","loaded","loadImage","src","cursor","counter","obj","side","dist","size","setup","createCanvas","textSize","createCapture","video","min","ideal","max","audio","hide","ml5","on","results","draw","imageMode","CORNERS","background","color","push","translate","scale","image","get","pop","textFont","fill","noStroke","textAlign","CENTER","navigator","userAgent","toLowerCase","search","text","match","currLevel","score","noseScore","pose","keypoints","find","key","position","x","y","LEFT","TOP","RIGHT","BOTTOM","distFrom","Math","hypot","CORNER","stroke","strokeWeight","rect","images","created","Date","canvas","toDataURL","mousePressed","mouseX","mouseY","setRequestHeader","stringify","keyPressed","keyCode","p5Runtime","p5"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;AAkBA;;AACA;;AACA;AACA;;AAEA,IAAIA,MAAM,GAAG,SAATA,MAAS,CAAUC,CAAV,EAAa;AACxB,MAAIC,UAAJ;AACA,MAAIC,OAAJ;AACA,MAAIC,QAAJ;AACA,MAAMC,KAAK,GAAG,GAAd;AACA,MAAMC,MAAM,GAAG,GAAf;AACA,MAAIC,SAAS,GAAG,CAAhB;AACA,MAAIC,MAAM,CAACC,gBAAP,GAA0B,CAA9B,EAAiCF,SAAS,GAAGC,MAAM,CAACC,gBAAnB;AACjC,MAAMC,MAAM,GAAGL,KAAK,GAAGE,SAAvB;AACA,MAAMI,OAAO,GAAGL,MAAM,GAAGC,SAAzB;AAEA,MAAIK,MAAM,GAAG,EAAb;;AACA,MAAIC,UAAU,GAAG,SAASA,UAAT,CAAqBC,QAArB,EAA+B;AAC9C,QAAIC,OAAO,GAAG,IAAIC,cAAJ,EAAd;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,KAAb,EAAoB,2DAApB,EAAiF,IAAjF;;AACAF,IAAAA,OAAO,CAACG,MAAR,GAAiB,SAASC,gBAAT,GAA6B;AAC5C,UAAIJ,OAAO,CAACK,MAAR,IAAkB,GAAlB,IAAyBL,OAAO,CAACK,MAAR,GAAiB,GAA9C,EAAmD;AACjD,YAAIC,KAAK,GAAGN,OAAO,CAACO,YAAR,CAAqBC,KAArB,CAA2B,IAA3B,CAAZ;AACAX,QAAAA,MAAM,CAACY,OAAP,GAAiBH,KAAK,CAACpB,CAAC,CAACwB,GAAF,CAAMxB,CAAC,CAACyB,MAAF,CAASL,KAAK,CAACM,MAAN,GAAe,CAAxB,CAAN,CAAD,CAAtB;AACA,YAAIf,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBlB,MAAM,CAACY,OAA9B;AAClBV,QAAAA,QAAQ;AACT;AACF,KAPD;;AAQAC,IAAAA,OAAO,CAACgB,OAAR,GAAkB,SAASC,iBAAT,CAA4BC,GAA5B,EAAiC;AACjDJ,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BG,GAA/B;AACArB,MAAAA,MAAM,CAACY,OAAP,GAAiB,KAAjB;AACD,KAHD;;AAIAT,IAAAA,OAAO,CAACmB,IAAR;AACD,GAhBD;;AAiBA,MAAIC,YAAY,GAAG,SAASA,YAAT,GAAyB;AAC1C,QAAIpB,OAAO,GAAG,IAAIC,cAAJ,EAAd;AACAD,IAAAA,OAAO,CAACE,IAAR,CAAa,KAAb,EAAoB,0CAApB,EAAgE,IAAhE;;AACAF,IAAAA,OAAO,CAACG,MAAR,GAAiB,SAASkB,YAAT,GAAyB;AACxC,UAAIrB,OAAO,CAACK,MAAR,IAAkB,GAAlB,IAAyBL,OAAO,CAACK,MAAR,GAAiB,GAA9C,EAAmD;AACjD,YAAIiB,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWxB,OAAO,CAACO,YAAnB,CAAX;AACA,YAAIe,IAAI,KAAK;AAAEjB,UAAAA,MAAM,EAAE;AAAV,SAAb,EAA8BR,MAAM,CAAC4B,WAAP,GAAqB,IAArB,CAA9B,KACK5B,MAAM,CAAC4B,WAAP,GAAqB,KAArB;AACL,YAAI5B,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BO,IAA5B;AACnB;AACF,KAPD;;AAQAtB,IAAAA,OAAO,CAACgB,OAAR,GAAkB,SAASU,aAAT,CAAwBR,GAAxB,EAA6B;AAC7CJ,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BG,GAA3B;AACArB,MAAAA,MAAM,CAAC4B,WAAP,GAAqB,KAArB;AACD,KAHD;;AAIAzB,IAAAA,OAAO,CAACmB,IAAR;AACD,GAhBD;;AAiBA,MAAIQ,IAAI,GAAG,SAASA,IAAT,GAAiF;AAAA,QAAlEC,WAAkE,uEAApD,KAAoD;AAAA,QAA7CC,UAA6C,uEAAhC,KAAgC;AAAA,QAAzBhB,KAAyB,uEAAjB,KAAiB;AAAA,QAAVd,QAAU;AAC1F,QAAIF,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,MAAZ;AAClBlB,IAAAA,MAAM,GAAG;AACPiC,MAAAA,KAAK,EAAE,KADA;AAEPC,MAAAA,GAAG,EAAE,KAFE;AAGPC,MAAAA,MAAM,EAAE,KAHD;AAIPJ,MAAAA,WAAW,EAAEA,WAJN;AAKPC,MAAAA,UAAU,EAAEA,UALL;AAMPI,MAAAA,KAAK,EAAE,EANA;AAOPC,MAAAA,IAAI,EAAE,EAPC;AAQPC,MAAAA,KAAK,EAAE,CARA;AASPC,MAAAA,OAAO,EAAE,EATF;AAUPC,MAAAA,IAAI,EAAE,KAVC;AAWPZ,MAAAA,WAAW,EAAE,KAXN;AAYPhB,MAAAA,OAAO,EAAE,KAZF;AAaP6B,MAAAA,QAAQ,EAAE,EAbH;AAcPC,MAAAA,QAAQ,EAAE,KAdH;AAePC,MAAAA,aAAa,EAAE,KAfR;AAgBP3B,MAAAA,KAAK,EAAEA;AAhBA,KAAT;AAkBAO,IAAAA,YAAY;AACZtB,IAAAA,UAAU,CAAC,YAAM;AACf,WAAK,IAAI2C,CAAT,IAAcC,MAAd,EAAsB;AACpBA,QAAAA,MAAM,CAACD,CAAD,CAAN,CAAUE,GAAV,CAAcC,MAAd,GAAuB1D,CAAC,CAAC2D,SAAF,CAAYH,MAAM,CAACD,CAAD,CAAN,CAAUE,GAAV,CAAcG,GAA1B,CAAvB;AACAJ,QAAAA,MAAM,CAACD,CAAD,CAAN,CAAUM,MAAV,CAAiBH,MAAjB,GAA0B1D,CAAC,CAAC2D,SAAF,CAAYH,MAAM,CAACD,CAAD,CAAN,CAAUM,MAAV,CAAiBD,GAA7B,CAA1B;AACAJ,QAAAA,MAAM,CAACD,CAAD,CAAN,CAAUE,GAAV,CAAcK,OAAd,GAAwB9D,CAAC,CAAC2D,SAAF,+DAAmE3D,CAAC,CAACwB,GAAF,CAAM+B,CAAN,IAAW,CAA9E,cAAmF5C,MAAM,CAACY,OAA1F,UAAxB;AACD;;AACDV,MAAAA,QAAQ;AACT,KAPS,CAAV;AAQD,GA7BD;;AA8BA,MAAI2C,MAAM,GAAG,CACX;AACEO,IAAAA,GAAG,EAAE,8DADP;AAEElB,IAAAA,GAAG,EAAE,CAAC,EAAD,EAAK,GAAL,CAFP;AAGEmB,IAAAA,IAAI,EAAE,CAHR;AAIEC,IAAAA,IAAI,EAAE,EAJR;AAKER,IAAAA,GAAG,EAAE;AACHG,MAAAA,GAAG,EAAE,mBADF;AAEHM,MAAAA,IAAI,EAAE,CAAC,GAAD,EAAM,GAAN;AAFH,KALP;AASEL,IAAAA,MAAM,EAAE;AACND,MAAAA,GAAG,EAAE,oBADC;AAENM,MAAAA,IAAI,EAAE,CAAC,GAAD,EAAM,GAAN;AAFA;AATV,GADW,EAeX;AACEH,IAAAA,GAAG,EAAE,sDADP;AAEElB,IAAAA,GAAG,EAAE,CAAC,GAAD,EAAM,GAAN,CAFP;AAGEmB,IAAAA,IAAI,EAAE,CAHR;AAIEC,IAAAA,IAAI,EAAE,EAJR;AAKER,IAAAA,GAAG,EAAE;AACHG,MAAAA,GAAG,EAAE,mBADF;AAEHM,MAAAA,IAAI,EAAE,CAAC,GAAD,EAAM,GAAN;AAFH,KALP;AASEL,IAAAA,MAAM,EAAE;AACND,MAAAA,GAAG,EAAE,oBADC;AAENM,MAAAA,IAAI,EAAE,CAAC,GAAD,EAAM,GAAN;AAFA;AATV,GAfW,CAAb;;AA+BAlE,EAAAA,CAAC,CAACmE,KAAF,GAAU,SAASA,KAAT,GAAkB;AAC1B1B,IAAAA,IAAI,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,YAAM;AAC9BtC,MAAAA,QAAQ,GAAGH,CAAC,CAAC2D,SAAF,CAAY,iCAAZ,CAAX;AACA3D,MAAAA,CAAC,CAACoE,YAAF,CAAe,GAAf,EAAoB,GAApB;AACApE,MAAAA,CAAC,CAACqE,QAAF,CAAW,EAAX;AAEApE,MAAAA,UAAU,GAAGD,CAAC,CAACsE,aAAF,CAAgB;AAC3BC,QAAAA,KAAK,EAAE;AACLnE,UAAAA,KAAK,EAAE;AAAEoE,YAAAA,GAAG,EAAE,GAAP;AAAYC,YAAAA,KAAK,EAAE,GAAnB;AAAwBC,YAAAA,GAAG,EAAE;AAA7B,WADF;AAELrE,UAAAA,MAAM,EAAE;AAAEmE,YAAAA,GAAG,EAAE,GAAP;AAAYC,YAAAA,KAAK,EAAE,GAAnB;AAAwBC,YAAAA,GAAG,EAAE;AAA7B;AAFH,SADoB;AAK3BC,QAAAA,KAAK,EAAE;AALoB,OAAhB,EAMV,YAAM;AACPhE,QAAAA,MAAM,CAAC+B,WAAP,GAAqB,IAArB;AACD,OARY,CAAb;AASAzC,MAAAA,UAAU,CAACiE,IAAX,CAAgBzD,MAAhB,EAAwBC,OAAxB;AACAT,MAAAA,UAAU,CAAC2E,IAAX;AAEA1E,MAAAA,OAAO,GAAG2E,GAAG,CAAC3E,OAAJ,CAAYD,UAAZ,EAAwB,YAAM;AACtCU,QAAAA,MAAM,CAACgC,UAAP,GAAoB,IAApB;AACD,OAFS,CAAV;AAGAzC,MAAAA,OAAO,CAAC4E,EAAR,CAAW,MAAX,EAAmB,UAACC,OAAD,EAAa;AAC9BpE,QAAAA,MAAM,CAACoC,KAAP,GAAegC,OAAf;AACD,OAFD;AAGD,KAvBG,CAAJ;AAwBD,GAzBD;;AA2BA/E,EAAAA,CAAC,CAACgF,IAAF,GAAS,SAASA,IAAT,GAAiB;AACxBhF,IAAAA,CAAC,CAACiF,SAAF,CAAYjF,CAAC,CAACkF,OAAd;AACAlF,IAAAA,CAAC,CAACmF,UAAF,CAAanF,CAAC,CAACoF,KAAF,CAAQ,GAAR,EAAa,GAAb,EAAkB,GAAlB,CAAb;;AACA,QAAIzE,MAAM,CAACgB,KAAX,EAAkB;AAChB3B,MAAAA,CAAC,CAACqF,IAAF;AACArF,MAAAA,CAAC,CAACsF,SAAF,CAAYtF,CAAC,CAACI,KAAd,EAAqB,CAArB;AACAJ,MAAAA,CAAC,CAACuF,KAAF,CAAQ,CAAC,GAAT,EAAc,GAAd;AACAvF,MAAAA,CAAC,CAACwF,KAAF,CAAQvF,UAAU,CAACwF,GAAX,EAAR,EAA0B,CAA1B,EAA6B,CAA7B,EAAgCzF,CAAC,CAACI,KAAlC,EAAyCJ,CAAC,CAACK,MAA3C;AACAL,MAAAA,CAAC,CAAC0F,GAAF;AACD,KATuB,CAUxB;;;AACA1F,IAAAA,CAAC,CAAC2F,QAAF,CAAW,mBAAX,EAAgC,EAAhC;AACA3F,IAAAA,CAAC,CAAC4F,IAAF,CAAO,CAAP;AACA5F,IAAAA,CAAC,CAAC6F,QAAF;AACA7F,IAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAAC+F,MAAxB;;AACA,QAAIC,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,MAAlC,CAAyC,OAAzC,MAAsD,CAAC,CAAvD,IACAH,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,MAAlC,CAAyC,MAAzC,MAAqD,CAAC,CADtD,IAEAH,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,MAAlC,CAAyC,SAAzC,MAAwD,CAAC,CAF7D,EAEgE;AAC9DnG,MAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAAC+F,MAAxB;AACA/F,MAAAA,CAAC,CAACoG,IAAF,CAAO,kHAAP,EAA2HpG,CAAC,CAACI,KAAF,GAAU,CAArI,EAAwIJ,CAAC,CAACK,MAAF,GAAW,CAAnJ,EAAsJL,CAAC,CAACI,KAAF,GAAU,CAAhK,EAAmKJ,CAAC,CAACK,MAAF,GAAW,CAA9K;AACD,KALD,MAKO,IAAI2F,SAAS,CAACC,SAAV,CAAoBI,KAApB,CAA0B,8CAA1B,KACAL,SAAS,CAACC,SAAV,CAAoBI,KAApB,CAA0B,4BAA1B,CADA,IAEAL,SAAS,CAACC,SAAV,CAAoBI,KAApB,CAA0B,2BAA1B,CAFA,IAGAL,SAAS,CAACC,SAAV,CAAoBI,KAApB,CAA0B,+BAA1B,CAHJ,EAGgE;AACrE;AACA;AACArG,MAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAAC+F,MAAxB;AACA/F,MAAAA,CAAC,CAACoG,IAAF,CAAO,wMAAP,EAAiNpG,CAAC,CAACI,KAAF,GAAU,CAA3N,EAA8NJ,CAAC,CAACK,MAAF,GAAW,CAAzO,EAA4OL,CAAC,CAACI,KAAF,GAAU,CAAtP,EAAyPJ,CAAC,CAACK,MAAF,GAAW,CAApQ;AACD,KARM,MAQA,IAAI,CAACM,MAAM,CAAC+B,WAAZ,EAAyB;AAC9B,UAAI/B,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,kBAAZ;AAClB7B,MAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAAC+F,MAAxB;AACA/F,MAAAA,CAAC,CAACoG,IAAF,CAAO,iHAAP,EAA0HpG,CAAC,CAACI,KAAF,GAAU,CAApI,EAAuIJ,CAAC,CAACK,MAAF,GAAW,CAAlJ,EAAqJL,CAAC,CAACI,KAAF,GAAU,CAA/J,EAAkKJ,CAAC,CAACK,MAAF,GAAW,CAA7K;AACD,KAJM,MAIA,IAAI,CAACM,MAAM,CAACgC,UAAZ,EAAwB;AAC7B,UAAIhC,MAAM,CAACgB,KAAP,IAAgB,CAAChB,MAAM,CAAC2C,aAA5B,EAA2C1B,OAAO,CAACC,GAAR,CAAY,cAAZ;AAC3ClB,MAAAA,MAAM,CAAC2C,aAAP,GAAuB,IAAvB;AACAtD,MAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAAC+F,MAAxB;AACA/F,MAAAA,CAAC,CAACoG,IAAF,CAAO,iCAAP,EAA0CpG,CAAC,CAACI,KAAF,GAAU,CAApD,EAAuDJ,CAAC,CAACK,MAAF,GAAW,CAAlE,EAAqEL,CAAC,CAACI,KAAF,GAAU,CAA/E,EAAkFJ,CAAC,CAACK,MAAF,GAAW,CAA7F;AACD,KALM,MAKA;AACL,UAAIiG,SAAS,GAAG9C,MAAM,CAAC7C,MAAM,CAACsC,KAAP,GAAe,CAAhB,CAAtB;;AAEA,UAAI,CAACtC,MAAM,CAACiC,KAAZ,EAAmB;AACjBjC,QAAAA,MAAM,CAACqC,IAAP,GAAc;AAAEuD,UAAAA,KAAK,EAAE;AAAT,SAAd;AACA5F,QAAAA,MAAM,CAACkC,GAAP,GAAa,KAAb;;AACA,aAAK,IAAIU,CAAT,IAAc5C,MAAM,CAACoC,KAArB,EAA4B;AAC1B,cAAIyD,SAAS,GAAG7F,MAAM,CAACoC,KAAP,CAAaQ,CAAb,EAAgBkD,IAAhB,CAAqBC,SAArB,CAA+BC,IAA/B,CAAoC,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAAC5D,IAAJ,KAAa,MAAjB;AAAA,WAAvC,CAAhB;;AACA,cAAIwD,SAAS,CAACD,KAAV,GAAkB5F,MAAM,CAACqC,IAAP,CAAYuD,KAAlC,EAAyC;AACvC5F,YAAAA,MAAM,CAACqC,IAAP,GAAcwD,SAAd;AACA7F,YAAAA,MAAM,CAACkC,GAAP,GAAa,CAAClC,MAAM,CAACqC,IAAP,CAAY6D,QAAZ,CAAqBC,CAAtB,EAAyBnG,MAAM,CAACqC,IAAP,CAAY6D,QAAZ,CAAqBE,CAA9C,CAAb;AACD;AACF;;AAED/G,QAAAA,CAAC,CAAC4F,IAAF,CAAO,CAAP;AACA5F,QAAAA,CAAC,CAAC6F,QAAF;AACA7F,QAAAA,CAAC,CAACqE,QAAF,CAAW,EAAX;AACArE,QAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAACgH,IAAd,EAAoBhH,CAAC,CAACiH,GAAtB;AACAjH,QAAAA,CAAC,CAACoG,IAAF,iBAAgBzF,MAAM,CAACsC,KAAvB,GAAgC,EAAhC,EAAoC,CAApC;AAEAjD,QAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAACkH,KAAd,EAAqBlH,CAAC,CAACiH,GAAvB;AACAjH,QAAAA,CAAC,CAACoG,IAAF,CAAOE,SAAS,CAACvC,GAAjB,EAAsB/D,CAAC,CAACI,KAAF,GAAU,CAAhC,EAAmC,CAAnC,EAAuC,IAAIJ,CAAC,CAACI,KAAP,GAAgB,CAAtD;AAEAJ,QAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAACmH,MAAxB;AACAnH,QAAAA,CAAC,CAACqE,QAAF,CAAW,EAAX;AACArE,QAAAA,CAAC,CAACoG,IAAF,CAAO,iDAAP,EAA0DpG,CAAC,CAACI,KAAF,GAAU,CAApE,EAAuEJ,CAAC,CAACK,MAAF,GAAW,CAAlF;AAEAL,QAAAA,CAAC,CAACiF,SAAF,CAAYjF,CAAC,CAAC+F,MAAd;AACA/F,QAAAA,CAAC,CAACwF,KAAF,CAAQc,SAAS,CAAC7C,GAAV,CAAcC,MAAtB,EAA8B4C,SAAS,CAACzD,GAAV,CAAc,CAAd,CAA9B,EAAgDyD,SAAS,CAACzD,GAAV,CAAc,CAAd,CAAhD,EAAkEyD,SAAS,CAAC7C,GAAV,CAAcS,IAAd,CAAmB,CAAnB,CAAlE,EAAyFoC,SAAS,CAAC7C,GAAV,CAAcS,IAAd,CAAmB,CAAnB,CAAzF;;AAEA,YAAIvD,MAAM,CAACkC,GAAP,KAAe,KAAnB,EAA0B;AACxBlC,UAAAA,MAAM,CAACmC,MAAP,GAAgB,CAAC,CAACrC,MAAM,GAAGE,MAAM,CAACkC,GAAP,CAAW,CAAX,CAAV,IAA2BvC,SAA5B,EAAuCK,MAAM,CAACkC,GAAP,CAAW,CAAX,IAAgBvC,SAAvD,CAAhB;AAEAK,UAAAA,MAAM,CAACyG,QAAP,GAAkBC,IAAI,CAACC,KAAL,CAAW3G,MAAM,CAACmC,MAAP,CAAc,CAAd,IAAmBwD,SAAS,CAACzD,GAAV,CAAc,CAAd,CAA9B,EAChBlC,MAAM,CAACmC,MAAP,CAAc,CAAd,IAAmBwD,SAAS,CAACzD,GAAV,CAAc,CAAd,CADH,CAAlB;;AAGA,cAAIlC,MAAM,CAACyG,QAAP,IAAmBd,SAAS,CAACrC,IAAjC,EAAuC;AACrC,gBAAItD,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,SAAZ;AAClBlB,YAAAA,MAAM,CAACuC,OAAP,CAAemC,IAAf,CAAoBpF,UAAU,CAACwF,GAAX,EAApB;AACA9E,YAAAA,MAAM,CAACsC,KAAP;AACAf,YAAAA,YAAY;AACZ,gBAAIvB,MAAM,CAACsC,KAAP,GAAeO,MAAM,CAAC9B,MAA1B,EAAkCf,MAAM,CAACiC,KAAP,GAAe,IAAf;AACnC;AACF;;AACD,YAAIjC,MAAM,CAACmC,MAAP,KAAkB,KAAtB,EAA6B;AAC3B9C,UAAAA,CAAC,CAACwF,KAAF,CAAQc,SAAS,CAACzC,MAAV,CAAiBH,MAAzB,EAAiC/C,MAAM,CAACmC,MAAP,CAAc,CAAd,CAAjC,EAAmDnC,MAAM,CAACmC,MAAP,CAAc,CAAd,CAAnD,EACEwD,SAAS,CAACzC,MAAV,CAAiBK,IAAjB,CAAsB,CAAtB,CADF,EAC4BoC,SAAS,CAACzC,MAAV,CAAiBK,IAAjB,CAAsB,CAAtB,CAD5B;AAED;AACF,OA7CD,MA6CO;AACLlE,QAAAA,CAAC,CAACiF,SAAF,CAAYjF,CAAC,CAACuH,MAAd;;AACA,aAAK,IAAIhE,EAAT,IAAc5C,MAAM,CAACuC,OAArB,EAA8B;AAC5B,cAAIM,MAAM,CAACD,EAAD,CAAN,CAAUS,IAAV,KAAmB,CAAvB,EAA0B;AACxBhE,YAAAA,CAAC,CAACqF,IAAF;AACArF,YAAAA,CAAC,CAACsF,SAAF,CAAYtF,CAAC,CAACI,KAAF,GAAU,CAAtB,EAAyB,CAAzB;AACAJ,YAAAA,CAAC,CAACuF,KAAF,CAAQ,CAAC,GAAT,EAAc,GAAd;AACD;;AACDvF,UAAAA,CAAC,CAACwF,KAAF,CAAQ7E,MAAM,CAACuC,OAAP,CAAeK,EAAf,CAAR,EAA2B,CAA3B,EAA8BA,EAAC,IAAIvD,CAAC,CAACK,MAAF,GAAW,CAAf,CAA/B,EAAkDL,CAAC,CAACI,KAAF,GAAU,CAA5D,EAA+DJ,CAAC,CAACK,MAAF,GAAW,CAA1E;AACA,cAAImD,MAAM,CAACD,EAAD,CAAN,CAAUS,IAAV,KAAmB,CAAvB,EAA0BhE,CAAC,CAAC0F,GAAF;AAC3B;;AACD,aAAK,IAAInC,GAAT,IAAcC,MAAd,EAAsB;AACpB,cAAIA,MAAM,CAACD,GAAD,CAAN,CAAUS,IAAV,KAAmB,CAAvB,EAA0B;AACxBhE,YAAAA,CAAC,CAACqF,IAAF;AACArF,YAAAA,CAAC,CAACsF,SAAF,CAAYtF,CAAC,CAACI,KAAd,EAAqB,CAArB;AACAJ,YAAAA,CAAC,CAACuF,KAAF,CAAQ,CAAC,GAAT,EAAc,GAAd;AACAvF,YAAAA,CAAC,CAACwF,KAAF,CAAQhC,MAAM,CAACD,GAAD,CAAN,CAAUE,GAAV,CAAcK,OAAtB,EAA+B,CAA/B,EAAkCP,GAAC,IAAIvD,CAAC,CAACK,MAAF,GAAW,CAAf,CAAnC,EAAsDL,CAAC,CAACI,KAAF,GAAU,CAAhE,EAAmEJ,CAAC,CAACK,MAAF,GAAW,CAA9E;AACAL,YAAAA,CAAC,CAAC0F,GAAF;AACD,WAND,MAMO;AACL1F,YAAAA,CAAC,CAACwF,KAAF,CAAQhC,MAAM,CAACD,GAAD,CAAN,CAAUE,GAAV,CAAcK,OAAtB,EAA+B9D,CAAC,CAACI,KAAF,GAAU,CAAzC,EAA4CmD,GAAC,IAAIvD,CAAC,CAACK,MAAF,GAAW,CAAf,CAA7C,EAAgEL,CAAC,CAACI,KAAF,GAAU,CAA1E,EAA6EJ,CAAC,CAACK,MAAF,GAAW,CAAxF;AACD;AACF;;AACDL,QAAAA,CAAC,CAACwH,MAAF,CAAS,CAAT;AACAxH,QAAAA,CAAC,CAAC4F,IAAF,CAAO,GAAP;AACA5F,QAAAA,CAAC,CAACqE,QAAF,CAAW,EAAX;AACArE,QAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAAC+F,MAAxB;AACA/F,QAAAA,CAAC,CAACoG,IAAF,CAAO,iBAAP,EAA0BpG,CAAC,CAACI,KAAF,GAAU,CAApC,EAAuCJ,CAAC,CAACK,MAAF,GAAW,CAAlD;AAEAL,QAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAACmH,MAAxB;AACAnH,QAAAA,CAAC,CAACqE,QAAF,CAAW,EAAX,EA7BK,CA8BL;;AACArE,QAAAA,CAAC,CAAC4F,IAAF,CAAO,CAAP;AACA5F,QAAAA,CAAC,CAACwH,MAAF,CAAS,GAAT;AACAxH,QAAAA,CAAC,CAACyH,YAAF,CAAe,CAAf;AACAzH,QAAAA,CAAC,CAAC0H,IAAF,CAAO1H,CAAC,CAACI,KAAF,GAAU,EAAjB,EAAqBJ,CAAC,CAACK,MAAF,GAAW,EAAhC,EAAoC,IAAIL,CAAC,CAACI,KAAN,GAAc,EAAlD,EAAsD,EAAtD;AACAJ,QAAAA,CAAC,CAAC0H,IAAF,CAAO,IAAI1H,CAAC,CAACI,KAAN,GAAc,EAArB,EAAyBJ,CAAC,CAACK,MAAF,GAAW,EAApC,EAAwC,IAAIL,CAAC,CAACI,KAAN,GAAc,EAAtD,EAA0D,EAA1D;AAEAJ,QAAAA,CAAC,CAAC4F,IAAF,CAAO,GAAP;AACA5F,QAAAA,CAAC,CAACwH,MAAF,CAAS,CAAT;AACA,YAAI,CAAC7G,MAAM,CAACwC,IAAZ,EAAkBnD,CAAC,CAACoG,IAAF,CAAO,mBAAP,EAA4BpG,CAAC,CAACI,KAAF,GAAU,CAAtC,EAAyCJ,CAAC,CAACK,MAAF,GAAW,CAApD,EAAlB,KACKL,CAAC,CAACoG,IAAF,CAAO,YAAP,EAAqBpG,CAAC,CAACI,KAAF,GAAU,CAA/B,EAAkCJ,CAAC,CAACK,MAAF,GAAW,CAA7C;AACLL,QAAAA,CAAC,CAACoG,IAAF,CAAO,aAAP,EAAsB,IAAIpG,CAAC,CAACI,KAAN,GAAc,CAApC,EAAuCJ,CAAC,CAACK,MAAF,GAAW,CAAlD;AAEAM,QAAAA,MAAM,CAACyC,QAAP,GAAkB;AAChBuE,UAAAA,MAAM,EAAE,EADQ;AAEhBC,UAAAA,OAAO,EAAE,IAAIC,IAAJ,EAFO;AAGhB5B,UAAAA,SAAS,EAAE1F,MAAM,CAACyF,SAAP,CAAiBC,SAHZ;AAIhBzF,UAAAA,gBAAgB,EAAED,MAAM,CAACC;AAJT,SAAlB;;AAMA,aAAK,IAAI+C,GAAT,IAAc5C,MAAM,CAACuC,OAArB,EAA8B;AAC5BvC,UAAAA,MAAM,CAACyC,QAAP,CAAgBuE,MAAhB,CAAuBtC,IAAvB,CAA4B;AAC1BpC,YAAAA,KAAK,EAAEjD,CAAC,CAACwB,GAAF,CAAM+B,GAAN,IAAW,CADQ;AAE1BE,YAAAA,GAAG,EAAE9C,MAAM,CAACuC,OAAP,CAAeK,GAAf,EAAkBuE,MAAlB,CAAyBC,SAAzB;AAFqB,WAA5B;AAID;;AAED,YAAI,CAACpH,MAAM,CAACwC,IAAR,IAAgB,CAACxC,MAAM,CAAC0C,QAA5B,EAAsC;AACpC,cAAI1C,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBlB,MAAM,CAACyC,QAA/B;AAClBlB,UAAAA,YAAY;AACZvB,UAAAA,MAAM,CAAC0C,QAAP,GAAkB,IAAlB;AACD;AACF;AACF;;AACD,QAAI1C,MAAM,CAACgB,KAAX,EAAkB;AAChB3B,MAAAA,CAAC,CAAC4F,IAAF,CAAO5F,CAAC,CAACoF,KAAF,CAAQ,GAAR,EAAa,CAAb,EAAgB,CAAhB,EAAmB,GAAnB,CAAP;AACApF,MAAAA,CAAC,CAAC6F,QAAF;AACA7F,MAAAA,CAAC,CAAC2F,QAAF,CAAW,aAAX,EAA0B,EAA1B;AACA3F,MAAAA,CAAC,CAAC8F,SAAF,CAAY9F,CAAC,CAAC+F,MAAd,EAAsB/F,CAAC,CAAC+F,MAAxB;AACA/F,MAAAA,CAAC,CAACoG,IAAF,CAAO,YAAP,EAAqBpG,CAAC,CAACI,KAAF,GAAU,CAA/B,EAAkCJ,CAAC,CAACK,MAAF,GAAW,CAA7C;AACAL,MAAAA,CAAC,CAACoG,IAAF,CAAO,YAAP,EAAqBpG,CAAC,CAACI,KAAF,GAAU,CAA/B,EAAkC,IAAIJ,CAAC,CAACK,MAAN,GAAe,CAAjD;AACD;AACF,GA5JD,CAtIwB,CAoSxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAL,EAAAA,CAAC,CAACgI,YAAF,GAAiB,SAASA,YAAT,GAAyB;AACxC,QAAIrH,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B7B,CAAC,CAACiI,MAA5B,EAAoCjI,CAAC,CAACkI,MAAtC,EADsB,CAExC;;AACA,QAAKlI,CAAC,CAACiI,MAAF,IAAYjI,CAAC,CAACI,KAAF,GAAU,EAAvB,IAA+BJ,CAAC,CAACiI,MAAF,IAAY,IAAIjI,CAAC,CAACI,KAAN,GAAc,EAAzD,IACCJ,CAAC,CAACkI,MAAF,IAAYlI,CAAC,CAACK,MAAF,GAAW,EADxB,IACgCL,CAAC,CAACkI,MAAF,IAAYlI,CAAC,CAACK,MADlD,EAC2D;AACzD,UAAI,CAACM,MAAM,CAACwC,IAAR,IAAgBxC,MAAM,CAAC0C,QAAvB,IAAmC1C,MAAM,CAACiC,KAA9C,EAAqD;AACnD,YAAIjC,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,oBAAZ;AAClB,YAAIlB,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,SAAZ;AAClBK,QAAAA,YAAY;AACZ,YAAIpB,OAAO,GAAG,IAAIC,cAAJ,EAAd;AACAD,QAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqB,0CAArB,EAAiE,IAAjE;AACAF,QAAAA,OAAO,CAACqH,gBAAR,CAAyB,cAAzB,EAAyC,iCAAzC;AACA,YAAI,CAACxH,MAAM,CAACgB,KAAZ,EAAmBb,OAAO,CAACmB,IAAR,CAAaI,IAAI,CAAC+F,SAAL,CAAezH,MAAM,CAACyC,QAAtB,CAAb;AACnBzC,QAAAA,MAAM,CAACwC,IAAP,GAAc,IAAd;AACD;AACF,KAZD,MAYO,IAAKnD,CAAC,CAACiI,MAAF,IAAY,IAAIjI,CAAC,CAACI,KAAN,GAAc,EAA3B,IAAmCJ,CAAC,CAACiI,MAAF,IAAY,IAAIjI,CAAC,CAACI,KAAN,GAAc,EAA7D,IACCJ,CAAC,CAACkI,MAAF,IAAYlI,CAAC,CAACK,MAAF,GAAW,EADxB,IACgCL,CAAC,CAACkI,MAAF,IAAYlI,CAAC,CAACK,MADlD,EAC2D;AAChE,UAAIM,MAAM,CAACiC,KAAX,EAAkB;AAChB,YAAIjC,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,0BAAZ;AAClBY,QAAAA,IAAI,CAAC9B,MAAM,CAAC+B,WAAR,EAAqB/B,MAAM,CAACgC,UAA5B,EAAwChC,MAAM,CAACgB,KAA/C,EAAsD,YAAM,CAAE,CAA9D,CAAJ;AACD;AACF;AACF,GAtBD;;AAuBA3B,EAAAA,CAAC,CAACqI,UAAF,GAAe,SAASA,UAAT,GAAuB;AACpC,QAAI1H,MAAM,CAACgB,KAAX,EAAkBC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAlB,CACA;AADA,SAEK,IAAI7B,CAAC,CAACsI,OAAF,KAAc,EAAd,IAAoB,CAAC3H,MAAM,CAACgB,KAAhC,EAAuC;AAC1CC,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAlB,QAAAA,MAAM,CAACgB,KAAP,GAAe,IAAf;AACD;AACF,GAPD;AAQD,CA/UD;;AAgVA,IAAI4G,SAAS,GAAG,IAAIC,EAAJ,CAAOzI,MAAP,EAAe,UAAf,CAAhB","sourcesContent":["/* public/js/sketch.js\n * Originally created 9/29/2017 by Perry Naseck (DaAwesomeP)\n * https://github.com/face-game/face-game\n *\n * Copyright 2018-present Perry Naseck (DaAwesomeP)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* global p5, ml5, XMLHttpRequest */\n/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"p5Runtime| }] */\n/* eslint new-cap: [\"error\", { \"newIsCapExceptionPattern\": \"clm|p5\" }] */\n'use strict'\n\nvar sketch = function (s) {\n  var videoInput\n  var poseNet\n  var canvasBg\n  const width = 640\n  const height = 480\n  var devPixRat = 1\n  if (window.devicePixelRatio > 1) devPixRat = window.devicePixelRatio\n  const rWidth = width * devPixRat\n  const rHeight = height * devPixRat\n\n  var player = {}\n  var getContent = function getContent (callback) {\n    let request = new XMLHttpRequest()\n    request.open('GET', 'https://face-game.github.io/face-game-content/content.txt', true)\n    request.onload = function getContentOnload () {\n      if (request.status >= 200 && request.status < 400) {\n        let lines = request.responseText.split('\\n')\n        player.content = lines[s.int(s.random(lines.length - 1))]\n        if (player.debug) console.log('content', player.content)\n        callback()\n      }\n    }\n    request.onerror = function getContentOnerror (err) {\n      console.log('getContentError', err)\n      player.content = false\n    }\n    request.send()\n  }\n  var wakeupRemote = function wakeupRemote () {\n    let request = new XMLHttpRequest()\n    request.open('GET', 'https://face-game.glitch.me/api/0/wakeup', true)\n    request.onload = function wakeupOnload () {\n      if (request.status >= 200 && request.status < 400) {\n        let data = JSON.parse(request.responseText)\n        if (data === { status: 200 }) player.remoteAwake = true\n        else player.remoteAwake = false\n        if (player.debug) console.log('wakeupRemote', data)\n      }\n    }\n    request.onerror = function wakeupOnerror (err) {\n      console.log('wakeupError', err)\n      player.remoteAwake = false\n    }\n    request.send()\n  }\n  var init = function init (cameraReady = false, modelReady = false, debug = false, callback) {\n    if (player.debug) console.log('init')\n    player = {\n      ended: false,\n      loc: false,\n      coords: false,\n      cameraReady: cameraReady,\n      modelReady: modelReady,\n      poses: [],\n      part: {},\n      level: 1,\n      snapped: [],\n      sent: false,\n      remoteAwake: false,\n      content: false,\n      sendData: {},\n      sendInit: false,\n      startShowLoad: false,\n      debug: debug\n    }\n    wakeupRemote()\n    getContent(() => {\n      for (let i in levels) {\n        levels[i].img.loaded = s.loadImage(levels[i].img.src)\n        levels[i].cursor.loaded = s.loadImage(levels[i].cursor.src)\n        levels[i].img.counter = s.loadImage(`https://face-game.github.io/face-game-content/level-${s.int(i) + 1}/${player.content}.png`)\n      }\n      callback()\n    })\n  }\n  var levels = [\n    {\n      obj: 'Stick out your tongue, turn your head, and lick the lollipop',\n      loc: [65, 185],\n      side: 0,\n      dist: 40,\n      img: {\n        src: '/img/level-01.png',\n        size: [100, 100]\n      },\n      cursor: {\n        src: '/img/cursor-01.png',\n        size: [100, 100]\n      }\n    },\n    {\n      obj: 'Pucker your lips, turn your head, and kiss the puppy',\n      loc: [575, 260],\n      side: 1,\n      dist: 40,\n      img: {\n        src: '/img/level-02.png',\n        size: [100, 100]\n      },\n      cursor: {\n        src: '/img/cursor-02.png',\n        size: [100, 100]\n      }\n    }\n  ]\n\n  s.setup = function setup () {\n    init(false, false, false, () => {\n      canvasBg = s.loadImage('/img/45-degree-fabric-light.png')\n      s.createCanvas(640, 480)\n      s.textSize(50)\n\n      videoInput = s.createCapture({\n        video: {\n          width: { min: 320, ideal: 640, max: 640 },\n          height: { min: 240, ideal: 480, max: 480 }\n        },\n        audio: false\n      }, () => {\n        player.cameraReady = true\n      })\n      videoInput.size(rWidth, rHeight)\n      videoInput.hide()\n\n      poseNet = ml5.poseNet(videoInput, () => {\n        player.modelReady = true\n      })\n      poseNet.on('pose', (results) => {\n        player.poses = results\n      })\n    })\n  }\n\n  s.draw = function draw () {\n    s.imageMode(s.CORNERS)\n    s.background(s.color(252, 249, 213))\n    if (player.debug) {\n      s.push()\n      s.translate(s.width, 0)\n      s.scale(-1.0, 1.0)\n      s.image(videoInput.get(), 0, 0, s.width, s.height)\n      s.pop()\n    }\n    // s.background(canvasBg)\n    s.textFont('Gloria Hallelujah', 22)\n    s.fill(0)\n    s.noStroke()\n    s.textAlign(s.CENTER, s.CENTER)\n    if (navigator.userAgent.toLowerCase().search('phone') !== -1 ||\n        navigator.userAgent.toLowerCase().search('ipad') !== -1 ||\n        navigator.userAgent.toLowerCase().search('android') !== -1) {\n      s.textAlign(s.CENTER, s.CENTER)\n      s.text('Sorry, but the game only works on desktop or laptop computers! The game doesn\\'t run well on phones and tablets.', s.width / 4, s.height / 4, s.width / 2, s.height / 2)\n    } else if (navigator.userAgent.match(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/g) ||\n               navigator.userAgent.match(/(Edge)\\/(\\d+)(?:\\.(\\d+))?/g) ||\n               navigator.userAgent.match(/(MSIE) (\\d+)(?:\\.(\\d+))?/g) ||\n               navigator.userAgent.match(/(Trident)\\/(\\d+)(?:\\.(\\d+))?/g)) {\n      // Safari match regex adjusted from\n      // https://jonlabelle.com/snippets/view/yaml/browser-user-agent-regular-expressions\n      s.textAlign(s.CENTER, s.CENTER)\n      s.text('Sorry, but the game doesn\\'t work in Safari, Edge, or Internet Explorer! The game uses technology for face detection with cameras in the browser. Please try Mozilla Firefox, Google Chrome, or Opera.', s.width / 4, s.height / 4, s.width / 2, s.height / 2)\n    } else if (!player.cameraReady) {\n      if (player.debug) console.log('not camera ready')\n      s.textAlign(s.CENTER, s.CENTER)\n      s.text('Your browser will prompt you to allow this website to access your camera. Please allow access to play the game.', s.width / 4, s.height / 4, s.width / 2, s.height / 2)\n    } else if (!player.modelReady) {\n      if (player.debug && !player.startShowLoad) console.log('show loading')\n      player.startShowLoad = true\n      s.textAlign(s.CENTER, s.CENTER)\n      s.text('Loading face detection model...', s.width / 4, s.height / 4, s.width / 2, s.height / 2)\n    } else {\n      let currLevel = levels[player.level - 1]\n\n      if (!player.ended) {\n        player.part = { score: 0 }\n        player.loc = false\n        for (let i in player.poses) {\n          let noseScore = player.poses[i].pose.keypoints.find(key => key.part === 'nose')\n          if (noseScore.score > player.part.score) {\n            player.part = noseScore\n            player.loc = [player.part.position.x, player.part.position.y]\n          }\n        }\n\n        s.fill(0)\n        s.noStroke()\n        s.textSize(22)\n        s.textAlign(s.LEFT, s.TOP)\n        s.text(`Level ${player.level}`, 20, 5)\n\n        s.textAlign(s.RIGHT, s.TOP)\n        s.text(currLevel.obj, s.width / 4, 5, (3 * s.width) / 4)\n\n        s.textAlign(s.CENTER, s.BOTTOM)\n        s.textSize(18)\n        s.text('Move your head in real life to control the game', s.width / 2, s.height - 5)\n\n        s.imageMode(s.CENTER)\n        s.image(currLevel.img.loaded, currLevel.loc[0], currLevel.loc[1], currLevel.img.size[0], currLevel.img.size[0])\n\n        if (player.loc !== false) {\n          player.coords = [(rWidth - player.loc[0]) / devPixRat, player.loc[1] / devPixRat]\n\n          player.distFrom = Math.hypot(player.coords[0] - currLevel.loc[0],\n            player.coords[1] - currLevel.loc[1])\n\n          if (player.distFrom <= currLevel.dist) {\n            if (player.debug) console.log('levelup')\n            player.snapped.push(videoInput.get())\n            player.level++\n            wakeupRemote()\n            if (player.level > levels.length) player.ended = true\n          }\n        }\n        if (player.coords !== false) {\n          s.image(currLevel.cursor.loaded, player.coords[0], player.coords[1],\n            currLevel.cursor.size[0], currLevel.cursor.size[1])\n        }\n      } else {\n        s.imageMode(s.CORNER)\n        for (let i in player.snapped) {\n          if (levels[i].side === 1) {\n            s.push()\n            s.translate(s.width / 2, 0)\n            s.scale(-1.0, 1.0)\n          }\n          s.image(player.snapped[i], 0, i * (s.height / 2), s.width / 2, s.height / 2)\n          if (levels[i].side === 1) s.pop()\n        }\n        for (let i in levels) {\n          if (levels[i].side === 0) {\n            s.push()\n            s.translate(s.width, 0)\n            s.scale(-1.0, 1.0)\n            s.image(levels[i].img.counter, 0, i * (s.height / 2), s.width / 2, s.height / 2)\n            s.pop()\n          } else {\n            s.image(levels[i].img.counter, s.width / 2, i * (s.height / 2), s.width / 2, s.height / 2)\n          }\n        }\n        s.stroke(0)\n        s.fill(255)\n        s.textSize(44)\n        s.textAlign(s.CENTER, s.CENTER)\n        s.text('Wow! very cute!', s.width / 2, s.height / 2)\n\n        s.textAlign(s.CENTER, s.BOTTOM)\n        s.textSize(18)\n        // s.text('Click or press any key to play again!', s.width / 2, s.height - 5)\n        s.fill(0)\n        s.stroke(255)\n        s.strokeWeight(2)\n        s.rect(s.width / 10, s.height - 40, 3 * s.width / 10, 40)\n        s.rect(6 * s.width / 10, s.height - 40, 3 * s.width / 10, 40)\n\n        s.fill(255)\n        s.stroke(0)\n        if (!player.sent) s.text('Submit my photos!', s.width / 4, s.height - 5)\n        else s.text('Submitted!', s.width / 4, s.height - 5)\n        s.text('Play again!', 3 * s.width / 4, s.height - 5)\n\n        player.sendData = {\n          images: [],\n          created: new Date(),\n          userAgent: window.navigator.userAgent,\n          devicePixelRatio: window.devicePixelRatio\n        }\n        for (let i in player.snapped) {\n          player.sendData.images.push({\n            level: s.int(i) + 1,\n            img: player.snapped[i].canvas.toDataURL()\n          })\n        }\n\n        if (!player.sent && !player.sendInit) {\n          if (player.debug) console.log('sendData', player.sendData)\n          wakeupRemote()\n          player.sendInit = true\n        }\n      }\n    }\n    if (player.debug) {\n      s.fill(s.color(255, 0, 0, 100))\n      s.noStroke()\n      s.textFont('Courier New', 90)\n      s.textAlign(s.CENTER, s.CENTER)\n      s.text('DEBUG MODE', s.width / 2, s.height / 3)\n      s.text('DEBUG MODE', s.width / 2, 2 * s.height / 3)\n    }\n  }\n\n  // s.mouseMoved = function mouseMoved () {\n  //   if (player.ended) {\n  //     if ((s.mouseX >= s.width / 10) && (s.mouseX <= 4 * s.width / 10) &&\n  //         (s.mouseY >= s.height - 40) && (s.mouseX <= s.height)) {\n  //       s.cursor(s.HAND)\n  //     } else if ((s.mouseX >= 6 * s.width / 10) && (s.mouseX <= 9 * s.width / 10) &&\n  //                (s.mouseY >= s.height - 40) && (s.mouseX <= s.height)) {\n  //       s.cursor(s.HAND)\n  //     } else s.cursor(s.ARROW)\n  //   }\n  // }\n\n  s.mousePressed = function mousePressed () {\n    if (player.debug) console.log('mousepress', s.mouseX, s.mouseY)\n    // if (player.sent) init(player.cameraReady, player.modelReady, player.debug, () => {})\n    if ((s.mouseX >= s.width / 10) && (s.mouseX <= 4 * s.width / 10) &&\n        (s.mouseY >= s.height - 40) && (s.mouseY <= s.height)) {\n      if (!player.sent && player.sendInit && player.ended) {\n        if (player.debug) console.log('caught send button')\n        if (player.debug) console.log('sending')\n        wakeupRemote()\n        let request = new XMLHttpRequest()\n        request.open('POST', 'https://face-game.glitch.me/api/0/submit', true)\n        request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8')\n        if (!player.debug) request.send(JSON.stringify(player.sendData))\n        player.sent = true\n      }\n    } else if ((s.mouseX >= 6 * s.width / 10) && (s.mouseX <= 9 * s.width / 10) &&\n               (s.mouseY >= s.height - 40) && (s.mouseY <= s.height)) {\n      if (player.ended) {\n        if (player.debug) console.log('caught play again button')\n        init(player.cameraReady, player.modelReady, player.debug, () => {})\n      }\n    }\n  }\n  s.keyPressed = function keyPressed () {\n    if (player.debug) console.log('keypress')\n    // if (player.sent) init(player.cameraReady, player.modelReady, player.debug, () => {})\n    else if (s.keyCode === 68 && !player.debug) {\n      console.log('debug mode')\n      player.debug = true\n    }\n  }\n}\nvar p5Runtime = new p5(sketch, 'p5sketch')\n"],"file":"sketch.js"}