{"version":3,"sources":["js/sketch.js"],"names":["sketch","s","videoInput","ctracker","canvasBg","player","getContent","callback","request","XMLHttpRequest","open","onload","getContentOnload","status","lines","responseText","split","content","int","random","length","debug","console","log","onerror","getContentOnerror","err","send","wakeupRemote","wakeupOnload","data","JSON","parse","remoteAwake","wakeupOnerror","init","cameraReady","ended","loc","coords","level","snapped","sent","i","levels","img","loaded","loadImage","src","cursor","counter","obj","side","dist","size","setup","createCanvas","textSize","createCapture","video","mandatory","minWidth","minHeight","optional","minFrameRate","audio","hide","clm","tracker","start","elt","draw","imageMode","CORNERS","background","color","push","translate","width","scale","image","get","height","pop","textFont","textAlign","CENTER","text","currLevel","getCurrentPosition","LEFT","TOP","textWidth","BOTTOM","distFrom","Math","hypot","CORNER","stroke","fill","sendData","images","created","Date","userAgent","window","navigator","canvas","toDataURL","setRequestHeader","stringify","mousePressed","keyPressed","keyCode","p5Runtime","p5"],"mappings":"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","sourcesContent":["/* public/js/sketch.js\n * Originally created 9/29/2017 by Perry Naseck (DaAwesomeP)\n * https://github.com/DaAwesomeP/face-game\n *\n * Copyright 2018-present Perry Naseck (DaAwesomeP)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* global p5, clm, XMLHttpRequest */\n/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"p5Runtime| }] */\n/* eslint new-cap: [\"error\", { \"newIsCapExceptionPattern\": \"clm|p5\" }] */\n'use strict'\n\nvar sketch = function (s) {\n  var videoInput\n  var ctracker\n  var canvasBg\n\n  var player = {}\n  var getContent = function getContent (callback) {\n    let request = new XMLHttpRequest()\n    request.open('GET', 'https://face-game.github.io/face-game-content/content.txt', true)\n    request.onload = function getContentOnload () {\n      if (request.status >= 200 && request.status < 400) {\n        let lines = request.responseText.split('\\n')\n        player.content = lines[s.int(s.random(lines.length - 1))]\n        if (player.debug) console.log('content', player.content)\n        callback()\n      }\n    }\n    request.onerror = function getContentOnerror (err) {\n      console.log('getContentError', err)\n      player.content = false\n    }\n    request.send()\n  }\n  var wakeupRemote = function wakeupRemote () {\n    let request = new XMLHttpRequest()\n    request.open('GET', 'https://face-game.glitch.me/api/0/wakeup', true)\n    request.onload = function wakeupOnload () {\n      if (request.status >= 200 && request.status < 400) {\n        let data = JSON.parse(request.responseText)\n        if (data === { status: 200 }) player.remoteAwake = true\n        else player.remoteAwake = false\n        if (player.debug) console.log('wakeupRemote', data)\n      }\n    }\n    request.onerror = function wakeupOnerror (err) {\n      console.log('wakeupError', err)\n      player.remoteAwake = false\n    }\n    request.send()\n  }\n  var init = function init (cameraReady = false, debug = false, callback) {\n    if (player.debug) console.log('init')\n    player = {\n      ended: false,\n      loc: false,\n      coords: false,\n      cameraReady: cameraReady,\n      level: 1,\n      snapped: [],\n      sent: false,\n      remoteAwake: false,\n      content: false,\n      debug: debug\n    }\n    wakeupRemote()\n    getContent(() => {\n      for (let i in levels) {\n        levels[i].img.loaded = s.loadImage(levels[i].img.src)\n        levels[i].cursor.loaded = s.loadImage(levels[i].cursor.src)\n        levels[i].img.counter = s.loadImage(`https://face-game.github.io/face-game-content/level-${s.int(i) + 1}/${player.content}.png`)\n      }\n      callback()\n    })\n  }\n  var levels = [\n    {\n      obj: 'Stick out your tongue and lick the lollipop',\n      loc: [65, 185],\n      side: 0,\n      dist: 40,\n      img: {\n        src: '/img/level-01.png',\n        size: [100, 100]\n      },\n      cursor: {\n        src: '/img/cursor-01.png',\n        size: [100, 100]\n      }\n    },\n    {\n      obj: 'Pucker your lips and kiss the puppy',\n      loc: [575, 260],\n      side: 1,\n      dist: 40,\n      img: {\n        src: '/img/level-02.png',\n        size: [100, 100]\n      },\n      cursor: {\n        src: '/img/cursor-02.png',\n        size: [100, 100]\n      }\n    }\n  ]\n\n  s.setup = function setup () {\n    init(false, false, () => {\n      canvasBg = s.loadImage('/img/45-degree-fabric-light.png')\n      s.createCanvas(640, 480)\n      s.textSize(50)\n\n      videoInput = s.createCapture({\n        video: {\n          mandatory: {\n            minWidth: 640,\n            minHeight: 480\n          },\n          optional: [{ minFrameRate: 10 }]\n        },\n        audio: false\n      }, () => {\n        player.cameraReady = true\n      })\n      videoInput.size(640, 480)\n      videoInput.hide()\n\n      ctracker = new clm.tracker()\n      ctracker.init()\n      ctracker.start(videoInput.elt)\n    })\n  }\n\n  s.draw = function draw () {\n    s.imageMode(s.CORNERS)\n    s.background(s.color(252, 249, 213))\n    if (player.debug) {\n      s.push()\n      s.translate(s.width, 0)\n      s.scale(-1.0, 1.0)\n      s.image(videoInput.get(), 0, 0, s.width, s.height)\n      s.pop()\n    }\n    // s.background(canvasBg)\n    s.textFont('Gloria Hallelujah', 22)\n    if (!player.cameraReady) {\n      if (player.debug) console.log('camera ready')\n      s.textAlign(s.CENTER, s.CENTER)\n      s.text('Your browser will prompt you to allow this website to access your camera. Please allow access to play the game.', s.width / 4, s.height / 4, s.width / 2, s.height / 2)\n    } else {\n      let currLevel = levels[player.level - 1]\n\n      if (!player.ended) {\n        player.loc = ctracker.getCurrentPosition()\n\n        s.textAlign(s.LEFT, s.TOP)\n        s.text(`Level ${player.level}`, 20, 5)\n\n        s.textAlign(s.LEFT, s.TOP)\n        s.text(currLevel.obj, s.width - (20 + s.textWidth(currLevel.obj)), 5)\n\n        s.textAlign(s.CENTER, s.BOTTOM)\n        s.textSize(18)\n        s.text('Move your head in real life to control the game', s.width / 2, s.height - 5)\n\n        s.imageMode(s.CENTER)\n        s.image(currLevel.img.loaded, currLevel.loc[0], currLevel.loc[1], currLevel.img.size[0], currLevel.img.size[0])\n\n        if (player.loc !== false) {\n          player.coords = [640 - player.loc[62][0], player.loc[62][1]]\n\n          player.distFrom = Math.hypot(player.coords[0] - currLevel.loc[0],\n            player.coords[1] - currLevel.loc[1])\n\n          if (player.distFrom <= currLevel.dist) {\n            if (player.debug) console.log('levelup')\n            player.snapped.push(videoInput.get())\n            player.level++\n            wakeupRemote()\n            if (player.level > levels.length) player.ended = true\n          }\n        }\n        if (player.coords !== false) {\n          s.image(currLevel.cursor.loaded, player.coords[0], player.coords[1],\n            currLevel.cursor.size[0], currLevel.cursor.size[1])\n        }\n      } else {\n        s.imageMode(s.CORNER)\n        for (let i in player.snapped) {\n          if (levels[i].side === 1) {\n            s.push()\n            s.translate(s.width / 2, 0)\n            s.scale(-1.0, 1.0)\n          }\n          s.image(player.snapped[i], 0, i * (s.height / 2), s.width / 2, s.height / 2)\n          if (levels[i].side === 1) s.pop()\n        }\n        for (let i in levels) {\n          if (levels[i].side === 0) {\n            s.push()\n            s.translate(s.width, 0)\n            s.scale(-1.0, 1.0)\n            s.image(levels[i].img.counter, 0, i * (s.height / 2), s.width / 2, s.height / 2)\n            s.pop()\n          } else {\n            s.image(levels[i].img.counter, s.width / 2, i * (s.height / 2), s.width / 2, s.height / 2)\n          }\n        }\n        s.stroke(0)\n        s.fill(255)\n        s.textSize(40)\n        s.textAlign(s.CENTER, s.CENTER)\n        s.text('Wow! very cute!', s.width / 2, s.height / 2)\n\n        s.textAlign(s.CENTER, s.BOTTOM)\n        s.textSize(18)\n        s.text('Click or press any key to play again!', s.width / 2, s.height - 5)\n\n        if (!player.sent) {\n          if (player.debug) console.log('sending')\n          let sendData = {\n            images: [],\n            created: new Date(),\n            userAgent: window.navigator.userAgent\n          }\n          for (let i in player.snapped) {\n            sendData.images.push({\n              level: s.int(i) + 1,\n              img: player.snapped[i].canvas.toDataURL()\n            })\n          }\n          if (player.debug) console.log('sendData', sendData)\n\n          wakeupRemote()\n          let request = new XMLHttpRequest()\n          request.open('POST', 'https://face-game.glitch.me/api/0/submit', true)\n          request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8')\n          if (!player.debug) request.send(JSON.stringify(sendData))\n          player.sent = true\n        }\n      }\n    }\n  }\n\n  s.mousePressed = function mousePressed () {\n    if (player.debug) console.log('mousepress')\n    if (player.sent) init(player.cameraReady, player.debug, () => {})\n  }\n  s.keyPressed = function keyPressed () {\n    if (player.debug) console.log('keypress')\n    if (player.sent) init(player.cameraReady, player.debug, () => {})\n    else if (s.keyCode === 68 && !player.debug) {\n      console.log('debug mode')\n      player.debug = true\n    }\n  }\n}\nvar p5Runtime = new p5(sketch, 'p5sketch')\n"],"file":"sketch.js"}