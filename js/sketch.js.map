{"version":3,"sources":["js/sketch.js"],"names":["sketch","s","videoInput","ctracker","canvasBg","player","getContent","callback","request","XMLHttpRequest","open","onload","getContentOnload","status","lines","responseText","split","content","int","random","length","onerror","getContentOnerror","err","console","log","send","wakeupRemote","wakeupOnload","data","JSON","parse","remoteAwake","wakeupOnerror","init","cameraReady","ended","loc","coords","level","snapped","sent","levels","obj","side","dist","img","src","size","cursor","setup","loadImage","i","loaded","counter","createCanvas","textSize","createCapture","video","mandatory","minWidth","minHeight","optional","minFrameRate","audio","hide","clm","tracker","start","elt","draw","imageMode","CORNERS","background","color","textFont","textAlign","CENTER","text","width","height","currLevel","getCurrentPosition","LEFT","TOP","textWidth","BOTTOM","image","distFrom","Math","hypot","push","get","CORNER","translate","scale","pop","stroke","fill","sendData","images","created","Date","canvas","toDataURL","setRequestHeader","stringify","mousePressed","keyPressed","p5Runtime","p5"],"mappings":"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","sourcesContent":["/* public/js/sketch.js\n * Originally created 9/29/2017 by Perry Naseck (DaAwesomeP)\n * https://github.com/DaAwesomeP/face-game\n *\n * Copyright 2018-present Perry Naseck (DaAwesomeP)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* global p5, clm, XMLHttpRequest */\n/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"p5Runtime| }] */\n/* eslint new-cap: [\"error\", { \"newIsCapExceptionPattern\": \"clm|p5\" }] */\n'use strict'\n\nvar sketch = function (s) {\n  var videoInput\n  var ctracker\n  var canvasBg\n\n  var player = {}\n  var getContent = function getContent (callback) {\n    let request = new XMLHttpRequest()\n    request.open('GET', 'https://face-game.github.io/face-game-content/content.txt', true)\n    request.onload = function getContentOnload () {\n      if (request.status >= 200 && request.status < 400) {\n        let lines = request.responseText.split('\\n')\n        player.content = lines[s.int(s.random(lines.length - 1))]\n        callback()\n      }\n    }\n    request.onerror = function getContentOnerror (err) {\n      console.log('getContentError', err)\n      player.content = false\n    }\n    request.send()\n  }\n  var wakeupRemote = function wakeupRemote () {\n    let request = new XMLHttpRequest()\n    request.open('GET', 'https://face-game.glitch.me/api/0/wakeup', true)\n    request.onload = function wakeupOnload () {\n      if (request.status >= 200 && request.status < 400) {\n        let data = JSON.parse(request.responseText)\n        if (data === { status: 200 }) player.remoteAwake = true\n        else player.remoteAwake = false\n      }\n    }\n    request.onerror = function wakeupOnerror (err) {\n      console.log('wakeupError', err)\n      player.remoteAwake = false\n    }\n    request.send()\n  }\n  var init = function init (cameraReady = false) {\n    player = {\n      ended: false,\n      loc: false,\n      coords: false,\n      cameraReady: cameraReady,\n      level: 1,\n      snapped: [],\n      sent: false,\n      remoteAwake: false,\n      content: false\n    }\n    wakeupRemote()\n  }\n  var levels = [\n    {\n      obj: 'Stick out your tongue and lick the lollipop',\n      loc: [65, 185],\n      side: 0,\n      dist: 40,\n      img: {\n        src: '/img/level-01.png',\n        size: [100, 100]\n      },\n      cursor: {\n        src: '/img/cursor-01.png',\n        size: [100, 100]\n      }\n    },\n    {\n      obj: 'Pucker your lips and kiss the puppy',\n      loc: [575, 260],\n      side: 1,\n      dist: 40,\n      img: {\n        src: '/img/level-02.png',\n        size: [100, 100]\n      },\n      cursor: {\n        src: '/img/cursor-02.png',\n        size: [100, 100]\n      }\n    }\n  ]\n\n  s.setup = function setup () {\n    init()\n    getContent(() => {\n      canvasBg = s.loadImage('/img/45-degree-fabric-light.png')\n      for (let i in levels) {\n        levels[i].img.loaded = s.loadImage(levels[i].img.src)\n        levels[i].cursor.loaded = s.loadImage(levels[i].cursor.src)\n        levels[i].img.counter = s.loadImage(`https://face-game.github.io/face-game-content/level-${s.int(i) + 1}/${player.content}.png`)\n      }\n      s.createCanvas(640, 480)\n      s.textSize(50)\n\n      videoInput = s.createCapture({\n        video: {\n          mandatory: {\n            minWidth: 640,\n            minHeight: 480\n          },\n          optional: [{ minFrameRate: 10 }]\n        },\n        audio: false\n      }, () => {\n        player.cameraReady = true\n      })\n      videoInput.size(640, 480)\n      videoInput.hide()\n\n      ctracker = new clm.tracker()\n      ctracker.init()\n      ctracker.start(videoInput.elt)\n    })\n  }\n\n  s.draw = function draw () {\n    s.imageMode(s.CORNERS)\n    s.background(s.color(252, 249, 213))\n    // s.background(canvasBg)\n    s.textFont('Gloria Hallelujah', 22)\n    if (!player.cameraReady) {\n      s.textAlign(s.CENTER, s.CENTER)\n      s.text('Your browser will prompt you to allow this website to access your camera. Please allow access to play the game.', s.width / 4, s.height / 4, s.width / 2, s.height / 2)\n    } else {\n      let currLevel = levels[player.level - 1]\n\n      if (!player.ended) {\n        player.loc = ctracker.getCurrentPosition()\n\n        s.textAlign(s.LEFT, s.TOP)\n        s.text(`Level ${player.level}`, 20, 5)\n\n        s.textAlign(s.LEFT, s.TOP)\n        s.text(currLevel.obj, s.width - (20 + s.textWidth(currLevel.obj)), 5)\n\n        s.textAlign(s.CENTER, s.BOTTOM)\n        s.textSize(18)\n        s.text('Move your head in real life to control the game', s.width / 2, s.height - 5)\n\n        s.imageMode(s.CENTER)\n        s.image(currLevel.img.loaded, currLevel.loc[0], currLevel.loc[1], currLevel.img.size[0], currLevel.img.size[0])\n\n        if (player.loc !== false) {\n          player.coords = [640 - player.loc[62][0], player.loc[62][1]]\n\n          player.distFrom = Math.hypot(player.coords[0] - currLevel.loc[0],\n            player.coords[1] - currLevel.loc[1])\n\n          if (player.distFrom <= currLevel.dist) {\n            player.snapped.push(videoInput.get())\n            player.level++\n            wakeupRemote()\n            if (player.level > levels.length) player.ended = true\n          }\n        }\n        if (player.coords !== false) {\n          s.image(currLevel.cursor.loaded, player.coords[0], player.coords[1],\n            currLevel.cursor.size[0], currLevel.cursor.size[1])\n        }\n      } else {\n        s.imageMode(s.CORNER)\n        for (let i in player.snapped) {\n          if (levels[i].side === 1) {\n            s.push()\n            s.translate(s.width / 2, 0)\n            s.scale(-1.0, 1.0)\n          }\n          s.image(player.snapped[i], 0, i * (s.height / 2), s.width / 2, s.height / 2)\n          if (levels[i].side === 1) s.pop()\n        }\n        for (let i in levels) {\n          if (levels[i].side === 0) {\n            s.push()\n            s.translate(s.width, 0)\n            s.scale(-1.0, 1.0)\n            s.image(levels[i].img.counter, 0, i * (s.height / 2), s.width / 2, s.height / 2)\n            s.pop()\n          } else {\n            s.image(levels[i].img.counter, s.width / 2, i * (s.height / 2), s.width / 2, s.height / 2)\n          }\n        }\n        s.stroke(0)\n        s.fill(255)\n        s.textSize(40)\n        s.textAlign(s.CENTER, s.CENTER)\n        s.text('Wow! very cute!', s.width / 2, s.height / 2)\n\n        s.textAlign(s.CENTER, s.BOTTOM)\n        s.textSize(18)\n        s.text('Click or press any key to play again!', s.width / 2, s.height - 5)\n\n        if (!player.sent) {\n          let sendData = {\n            images: [],\n            created: new Date()\n          }\n          for (let i in player.snapped) {\n            sendData.images.push({\n              level: s.int(i) + 1,\n              img: player.snapped[i].canvas.toDataURL()\n            })\n          }\n\n          wakeupRemote()\n          let request = new XMLHttpRequest()\n          request.open('POST', 'https://face-game.glitch.me/api/0/submit', true)\n          request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8')\n          request.send(JSON.stringify(sendData))\n\n          player.sent = true\n        }\n      }\n    }\n  }\n\n  s.mousePressed = function mousePressed () {\n    if (player.sent) init(player.cameraReady)\n  }\n  s.keyPressed = function keyPressed () {\n    if (player.sent) init(player.cameraReady)\n  }\n}\nvar p5Runtime = new p5(sketch, 'p5sketch')\n"],"file":"sketch.js"}